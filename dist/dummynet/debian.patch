--- ipfw3-20100319.orig/Makefile
+++ ipfw3-20100319/Makefile
@@ -52,3 +52,9 @@
 	zip -r /tmp/$(WINDIST) binary -x \*.svn\*
 
 install:
+	install -d $(DESTDIR)/usr/sbin
+	install -m 755 ipfw/ipfw \
+		$(DESTDIR)/usr/sbin/ipfw
+	install -d $(DESTDIR)/lib/modules/$(KERNEL)/extra/ipfw
+	install -m 644 dummynet2/ipfw_mod.ko \
+		$(DESTDIR)/lib/modules/$(KERNEL)/extra/ipfw/ipfw_mod.ko
--- ipfw3-20100319.orig/debian/postrm
+++ ipfw3-20100319/debian/postrm
@@ -0,0 +1,40 @@
+#!/bin/sh
+# postrm script for #PACKAGE#
+#
+# see: dh_installdeb(1)
+
+set -e
+
+# summary of how this script can be called:
+#        * <postrm> `remove'
+#        * <postrm> `purge'
+#        * <old-postrm> `upgrade' <new-version>
+#        * <new-postrm> `failed-upgrade' <old-version>
+#        * <new-postrm> `abort-install'
+#        * <new-postrm> `abort-install' <old-version>
+#        * <new-postrm> `abort-upgrade' <old-version>
+#        * <disappearer's-postrm> `disappear' <overwriter>
+#          <overwriter-version>
+# for details, see http://www.debian.org/doc/debian-policy/ or
+# the debian-policy package
+
+
+case "$1" in
+    purge|remove|upgrade|failed-upgrade|abort-install|abort-upgrade|disappear)
+        depmod -a
+    ;;
+
+    *)
+        echo "postrm called with unknown argument \`$1'" >&2
+        exit 1
+    ;;
+esac
+
+# dh_installdeb will replace this with shell code automatically
+# generated by other debhelper scripts.
+
+#DEBHELPER#
+
+exit 0
+
+
--- ipfw3-20100319.orig/debian/control
+++ ipfw3-20100319/debian/control
@@ -0,0 +1,19 @@
+Source: ipfw3
+Section: admin
+Priority: extra
+Maintainer: Andreas Teuchert <ant+devel@unix-ag.uni-kl.de>
+Build-Depends: debhelper (>= 5), pve-headers-2.6.32-5-pve, cdbs
+Standards-Version: 3.8.4
+
+Package: ipfw3-2.6.32-5-pve
+Architecture: any
+Depends: ${shlibs:Depends}, ${misc:Depends}, pve-kernel-2.6.32-5-pve
+Suggests: ${alternatelibs:Suggests}
+Conflicts: ipfw3-2.6.18-2-pve
+Description: network simulation tool
+ dummynet is a tool originally designed for testing networking protocols, and
+ since then used for a variety of applications including bandwidth management.
+ It simulates/enforces queue and bandwidth limitations, delays, packet losses,
+ and multipath effects. It also implements a variant of Weighted Fair Queueing
+ called WF2Q+. It can be used on user's workstations, or on machines acting as
+ routers or bridges.
--- ipfw3-20100319.orig/debian/compat
+++ ipfw3-20100319/debian/compat
@@ -0,0 +1 @@
+5
--- ipfw3-20100319.orig/debian/copyright
+++ ipfw3-20100319/debian/copyright
@@ -0,0 +1,42 @@
+This package was debianized by Andreas Teuchert <ant+devel@unix-ag.uni-kl.de> on
+Tue, 31 Aug 2010 12:04:54 +0200.
+
+It was downloaded from http://info.iet.unipi.it/~luigi/dummynet/
+
+Upstream Authors:
+
+    Luigi Rizzo (main design and development)
+		Marta Carbone (Linux and Planetlab ports)
+    Riccardo Panicucci (modular scheduler support)
+		Francesco Magno (Windows port)
+    Fabio Checconi (the QFQ scheduler)
+
+Copyright:
+
+    Copyright (C) Luigi Rizzo, Marta Carbone, Riccardo Panicucci,
+                  Francesco Magno, Fabio Checconi
+
+License:
+
+    Redistribution and use in source and binary forms, with or without
+    modification, are permitted under the terms of the BSD License.
+
+    THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
+    ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
+    IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
+    ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
+    FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
+    DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
+    OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
+    HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
+    LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
+    OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+    SUCH DAMAGE.
+
+On Debian systems, the complete text of the BSD License can be
+found in `/usr/share/common-licenses/BSD'.
+
+
+The Debian packaging is (C) 2010, Andreas Teuchert <ant+devel@unix-ag.uni-kl.de>
+and is licensed under the GPL, see `/usr/share/common-licenses/GPL'.
+
--- ipfw3-20100319.orig/debian/rules
+++ ipfw3-20100319/debian/rules
@@ -0,0 +1,8 @@
+#!/usr/bin/make -f
+
+include /usr/share/cdbs/1/rules/debhelper.mk
+include /usr/share/cdbs/1/class/makefile.mk
+
+KERNEL = 2.6.32-5-pve-1000hz
+DEB_MAKE_INVOKE = $(MAKE) KERNELPATH=/lib/modules/$(KERNEL)/build KERNEL=$(KERNEL)
+DEB_MAKE_INSTALL_TARGET = install DESTDIR=$(DEB_DESTDIR)
--- ipfw3-20100319.orig/debian/ipfw3-2.6.32-5-pve.manpages
+++ ipfw3-20100319/debian/ipfw3-2.6.32-5-pve.manpages
@@ -0,0 +1 @@
+ipfw/ipfw.8
--- ipfw3-20100319.orig/debian/postinst
+++ ipfw3-20100319/debian/postinst
@@ -0,0 +1,42 @@
+#!/bin/sh
+# postinst script for ipfw3
+#
+# see: dh_installdeb(1)
+
+set -e
+
+# summary of how this script can be called:
+#        * <postinst> `configure' <most-recently-configured-version>
+#        * <old-postinst> `abort-upgrade' <new version>
+#        * <conflictor's-postinst> `abort-remove' `in-favour' <package>
+#          <new-version>
+#        * <postinst> `abort-remove'
+#        * <deconfigured's-postinst> `abort-deconfigure' `in-favour'
+#          <failed-install-package> <version> `removing'
+#          <conflicting-package> <version>
+# for details, see http://www.debian.org/doc/debian-policy/ or
+# the debian-policy package
+
+
+case "$1" in
+    configure)
+			depmod -a
+    ;;
+
+    abort-upgrade|abort-remove|abort-deconfigure)
+    ;;
+
+    *)
+        echo "postinst called with unknown argument \`$1'" >&2
+        exit 1
+    ;;
+esac
+
+# dh_installdeb will replace this with shell code automatically
+# generated by other debhelper scripts.
+
+#DEBHELPER#
+
+exit 0
+
+
--- ipfw3-20100319.orig/debian/changelog
+++ ipfw3-20100319/debian/changelog
@@ -0,0 +1,23 @@
+ipfw3 (20100319-4) stable; urgency=low
+
+  * Building for 2.6.23-5-pve
+
+ -- root <root@KERNEL_BUILD.e4.ukl.german-lab.de>  Thu, 23 Jun 2011 16:22:37 +0200
+
+ipfw3 (20100319-3) stable; urgency=low
+
+  * Removed #if 0 from dummynet2/missing.h. No longer needed for 2.6.32.
+
+ -- Andreas Teuchert <ant+devel@unix-ag.uni-kl.de>  Mon, 21 Feb 2011 16:07:11 +0100
+
+ipfw3 (20100319-2) stable; urgency=low
+
+  * Building for 2.6.32-4-pve
+
+ -- Andreas Teuchert <ant+devel@unix-ag.uni-kl.de>  Thu, 21 Oct 2010 08:30:50 +0200
+
+ipfw3 (20100319-1) stable; urgency=low
+
+  * Initial release. (Closes: #00000)
+
+ -- Andreas Teuchert <ant+devel@unix-ag.uni-kl.de>  Tue, 31 Aug 2010 12:04:54 +0200
